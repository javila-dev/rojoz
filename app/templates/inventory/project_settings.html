{% extends "base.html" %}

{% block title %}Inventario - {{ project.name }}{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto space-y-6">
    <div class="flex items-start justify-between gap-6">
        <div class="flex items-center gap-4">
            <div class="avatar">
                <div class="w-14 rounded-full ring ring-rojoz-100 ring-offset-2 ring-offset-base-100">
                    {% if project.logo %}
                    <img src="{{ project.logo.url }}" alt="Logo {{ project.name }}" />
                    {% else %}
                    <div class="bg-rojoz-50 text-rojoz-700 flex items-center justify-center w-14 h-14 text-base font-semibold">
                        {{ project.name|slice:":2"|upper }}
                    </div>
                    {% endif %}
                </div>
            </div>
            <div>
                <h1 class="text-3xl font-bold text-gray-900">{{ project.name }}</h1>
                <p class="text-gray-600 mt-2">Administra tipos de casa y acabados del proyecto.</p>
            </div>
        </div>
        <a href="{% url 'inventory:project_list' %}" class="btn btn-neutral-elegant">Volver a proyectos</a>
    </div>

    <!-- Configuración del proyecto -->
    <div class="card bg-white border border-gray-200 shadow-sm">
        <div class="card-body">
            <h2 class="card-title mb-4">Configuración del proyecto</h2>
            <form method="post">
                {% csrf_token %}
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.name.label }}</span></label>
                        {{ form.name }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.city.label }}</span></label>
                        {{ form.city }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.amortization_type.label }}</span></label>
                        {{ form.amortization_type }}
                    </div>
                </div>

                <div class="divider text-sm text-gray-400">Parámetros legales / contrato</div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.penalty_percentage.label }}</span></label>
                        {{ form.penalty_percentage }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.payment_grace_days.label }}</span></label>
                        {{ form.payment_grace_days }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.structural_guarantee_years.label }}</span></label>
                        {{ form.structural_guarantee_years }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.construction_start_months.label }}</span></label>
                        {{ form.construction_start_months }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.construction_duration_months.label }}</span></label>
                        {{ form.construction_duration_months }}
                    </div>
                </div>

                <div class="divider text-sm text-gray-400">Parámetros financieros</div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.max_initial_months.label }}</span></label>
                        {{ form.max_initial_months }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.max_finance_months.label }}</span></label>
                        {{ form.max_finance_months }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.finance_rate_monthly.label }}</span></label>
                        {{ form.finance_rate_monthly }}
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text font-medium">{{ form.mora_rate_monthly.label }}</span></label>
                        {{ form.mora_rate_monthly }}
                    </div>
                </div>

                <div class="mt-6 flex justify-end">
                    <button type="submit" class="btn btn-neutral-elegant">Guardar configuración</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Módulos del proyecto -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        <div class="card bg-white border border-gray-200 shadow-sm">
            <div class="card-body space-y-2">
                <h2 class="card-title">Tipos de casa</h2>
                <p class="text-sm text-gray-500">Crea y edita prototipos.</p>
                <a href="{% url 'inventory:house_type_list' project.id %}" class="btn btn-neutral-elegant w-full">Gestionar</a>
            </div>
        </div>

        <div class="card bg-white border border-gray-200 shadow-sm">
            <div class="card-body space-y-2">
                <h2 class="card-title">Categorías de acabados</h2>
                <p class="text-sm text-gray-500">Organiza los acabados por categoría.</p>
                <a href="{% url 'inventory:finish_category_list' project.id %}" class="btn btn-neutral-elegant w-full">Gestionar</a>
            </div>
        </div>

        <div class="card bg-white border border-gray-200 shadow-sm">
            <div class="card-body space-y-2">
                <h2 class="card-title">Opciones de acabados</h2>
                <p class="text-sm text-gray-500">Define acabados y valores.</p>
                <a href="{% url 'inventory:finish_option_list' project.id %}" class="btn btn-neutral-elegant w-full">Gestionar</a>
            </div>
        </div>

        <div class="card bg-white border border-gray-200 shadow-sm">
            <div class="card-body space-y-2">
                <h2 class="card-title">Formas de pago</h2>
                <p class="text-sm text-gray-500">Efectivo, transferencia, cheque, etc.</p>
                <a href="{% url 'finance:payment_method_list' project.id %}" class="btn btn-neutral-elegant w-full">Gestionar</a>
            </div>
        </div>

        <div class="card bg-white border border-gray-200 shadow-sm">
            <div class="card-body space-y-2">
                <h2 class="card-title">Cargos de comisión</h2>
                <p class="text-sm text-gray-500">Configura cargos fijos por proyecto.</p>
                <a href="{% url 'finance:project_commission_role_list' project.id %}" class="btn btn-neutral-elegant w-full">Gestionar</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
